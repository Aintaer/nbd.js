(function(t){var n,e,r;(function(t){function i(t,n){var e,r,i,o,u,s,c,a,f,p,l=n&&n.split("/"),h=g.map,d=h&&h["*"]||{};if(t&&"."===t.charAt(0)&&n){for(l=l.slice(0,l.length-1),t=l.concat(t.split("/")),a=0;t.length>a;a+=1)if(p=t[a],"."===p)t.splice(a,1),a-=1;else if(".."===p){if(1===a&&(".."===t[2]||".."===t[0]))break;a>0&&(t.splice(a-1,2),a-=2)}t=t.join("/")}if((l||d)&&h){for(e=t.split("/"),a=e.length;a>0;a-=1){if(r=e.slice(0,a).join("/"),l)for(f=l.length;f>0;f-=1)if(i=h[l.slice(0,f).join("/")],i&&(i=i[r])){o=i,u=a;break}if(o)break;!s&&d&&d[r]&&(s=d[r],c=a)}!o&&s&&(o=s,u=c),o&&(e.splice(0,u,o),t=e.join("/"))}return t}function o(n,e){return function(){return l.apply(t,m.call(arguments,0).concat([n,e]))}}function u(t){return function(n){return i(n,t)}}function s(t){return function(n){y[t]=n}}function c(n){if(b.hasOwnProperty(n)){var e=b[n];delete b[n],v[n]=!0,p.apply(t,e)}if(!y.hasOwnProperty(n)&&!v.hasOwnProperty(n))throw Error("No "+n);return y[n]}function a(t){var n,e=t?t.indexOf("!"):-1;return e>-1&&(n=t.substring(0,e),t=t.substring(e+1,t.length)),[n,t]}function f(t){return function(){return g&&g.config&&g.config[t]||{}}}var p,l,h,d,y={},b={},g={},v={},m=[].slice;h=function(t,n){var e,r=a(t),o=r[0];return t=r[1],o&&(o=i(o,n),e=c(o)),o?t=e&&e.normalize?e.normalize(t,u(n)):i(t,n):(t=i(t,n),r=a(t),o=r[0],t=r[1],o&&(e=c(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:e}},d={require:function(t){return o(t)},exports:function(t){var n=y[t];return n!==void 0?n:y[t]={}},module:function(t){return{id:t,uri:"",exports:y[t],config:f(t)}}},p=function(n,e,r,i){var u,a,f,p,l,g,m=[];if(i=i||n,"function"==typeof r){for(e=!e.length&&r.length?["require","exports","module"]:e,l=0;e.length>l;l+=1)if(p=h(e[l],i),a=p.f,"require"===a)m[l]=d.require(n);else if("exports"===a)m[l]=d.exports(n),g=!0;else if("module"===a)u=m[l]=d.module(n);else if(y.hasOwnProperty(a)||b.hasOwnProperty(a)||v.hasOwnProperty(a))m[l]=c(a);else{if(!p.p)throw Error(n+" missing "+a);p.p.load(p.n,o(i,!0),s(a),{}),m[l]=y[a]}f=r.apply(y[n],m),n&&(u&&u.exports!==t&&u.exports!==y[n]?y[n]=u.exports:f===t&&g||(y[n]=f))}else n&&(y[n]=r)},n=e=l=function(n,e,r,i,o){return"string"==typeof n?d[n]?d[n](e):c(h(n,e).f):(n.splice||(g=n,e.splice?(n=e,e=r,r=null):n=t),e=e||function(){},"function"==typeof r&&(r=i,i=o),i?p(t,n,e,r):setTimeout(function(){p(t,n,e,r)},15),l)},l.config=function(t){return g=t,l},r=function(t,n,e){n.splice||(e=n,n=[]),b[t]=[t,n,e]},r.amd={jQuery:!0}})(),r("vendor/almond/almond",function(){}),r("nbd/Class",[],function(){var t,n,e,r=!1,i=/xyz;/.test(function(){var t;return t})?/\b_super\b/:/.*/;return e=function(t){var n,e={};for(n in t)t.hasOwnProperty(n)&&(e[n]={value:t[n]});return Object.defineProperties(this.prototype,e),this},n=function(t){var n;if("function"==typeof this&&"function"==typeof t)for(n=this.prototype;n.constructor.__super__;)if(n=n.constructor.__super__,n===t.prototype)return!0;return!1},t=function(){},t.inherits=n,t.extend=function o(t,n){function u(t,n,e){return function(){var r=this.hasOwnProperty("_super"),i=this._super;this._super=l[t],e&&this._super.apply(this,arguments);try{return n.apply(this,arguments)}catch(o){}finally{r&&(this._super=i)}}}function s(t,n){return function(){return t.apply(this,arguments),n.apply(this,arguments)}}function c(){r||"function"!=typeof this.init||this.init.apply(this,arguments)}var a,f,p,l=this.prototype;r=!0,a=new this,r=!1;for(f in t)t.hasOwnProperty(f)&&(p="init"===f&&!(n&&n.hasOwnProperty("_")&&n._),a[f]="function"==typeof t[f]&&"function"==typeof l[f]&&(p||i.test(t[f]))?u(f,t[f],p):t[f]);for(f in this)this.hasOwnProperty(f)&&(c[f]=this[f]);for(f in n)n.hasOwnProperty(f)&&(p="init"===f&&!(n&&n.hasOwnProperty("_")&&n._),c[f]=p&&"function"==typeof c[f]&&"function"==typeof n[f]?s(c[f],n[f]):n[f]);return c.prototype=a,c.prototype.constructor=c,c.extend=o,c.mixin=e,c.__super__=l,c},t}),r("jquery",[],function(){return t.jQuery}),r("nbd/util/async",[],function(){function t(t){r.push(t),window.postMessage(i,"*")}function n(t){if(t.source===window&&t.data===i&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}}var e,r=[],i="async-message",o="function"==typeof window.postMessage&&"function"==typeof window.addEventListener;return o&&window.addEventListener("message",n,!0),e=o?t:function(t){window.setTimeout(t,0)}}),r("nbd/trait/pubsub",[],function(){var t=/\s+/;return{on:function(n,e,r){var i,o,u;if(!e)return this;for(n=n.split(t),this._callbacks||Object.defineProperty(this,"_callbacks",{configurable:!0,value:{},writable:!0}),i=this._callbacks;o=n.shift();)u=i[o]||(i[o]=[]),u.push(e,r);return this},off:function(n,e,r){var i,o,u,s;if(!(o=this._callbacks))return this;if(!(n||e||r))return delete this._callbacks,this;for(n=n?n.split(t):Object.keys(o);i=n.shift();)if((u=o[i])&&(e||r))for(s=u.length-2;s>=0;s-=2)e&&u[s]!==e||r&&u[s+1]!==r||u.splice(s,2);else delete o[i];return this},trigger:function(n){var e,r,i,o,u,s,c,a;if(!(r=this._callbacks))return this;for(a=[],n=n.split(t),o=1,u=arguments.length;u>o;o++)a[o-1]=arguments[o];for(;e=n.shift();){if((c=r.all)&&(c=c.slice()),(i=r[e])&&(i=i.slice()),i)for(o=0,u=i.length;u>o;o+=2)i[o].apply(i[o+1]||this,a);if(c)for(s=[e].concat(a),o=0,u=c.length;u>o;o+=2)c[o].apply(c[o+1]||this,s)}return this}}}),function(t,n){var e,i;"string"==typeof t&&(e=t.split("."),i=e.pop(),t=e.reduce(function(t,n){return t&&t[n]},this)),"function"==typeof r&&r.amd?r("nbd/Model",["jquery","nbd/Class","nbd/util/async","nbd/trait/pubsub"],function(){var e=n.apply(this,arguments);return t&&(t[i]=e),e}):(t||this)[i]=n.call(this,jQuery,t.Class)}("jQuery.Core.Model",function(t,n,e,r){function i(t,n,e,r){if(r&&!t.hasOwnProperty(n))throw Error("Invalid property: "+n);t[n]=e}var o=function(t,n){if(this._dirty){var e,r,i=[];for(e in n)n.hasOwnProperty(e)&&(t[e]!==n[e]&&i.push([e,n[e],t[e]]),delete t[e]);for(e in t)t.hasOwnProperty(e)&&i.push([e,,t[e]]);for(r=0;i.length>r;++r)this.trigger.apply(this,i[r]);this._dirty=!1}},u=n.extend({init:function(n,r){r=r||{},"string"==typeof n&&n.match(/^\d+$/)&&(n=+n),Object.defineProperty(this,"_dirty",{writable:!0}),this.id=function(){return n},this.data=function(){return this._dirty=!0,e(o.bind(this,t.extend({},r),r)),r}},get:function(n,e){e="boolean"!=typeof e?!0:e;var r=this.data();return e&&!r.hasOwnProperty(n)&&t.error("Invalid property: "+n),r[n]},set:function(t,n,e){var r,o;if("object"==typeof t&&(e=n),e="boolean"==typeof e?e:!0,r=this.data(),"string"==typeof t)return i(r,t,n,e),this;if("object"==typeof t){for(o in t)t.hasOwnProperty(o)&&i(r,o,t[o],e);return this}},update:function(n,e){e=e||{};var r=this,i=this.constructor.UPDATE_AJAX_TYPE;return t.ajax({url:this.constructor.URL_UPDATE,type:i,data:n}).done(function(e){(r.constructor.API===!0||e.updated)&&(r.constructor.API&&(n=t.extend(e[0],t.parseJSON(n)[0]),r.constructor.filterUpdateData&&r.constructor.filterUpdateData(n)),r.set(n))})}},{create:function(n){return t.ajax({url:this.URL_CREATE,type:"POST",data:n})},UPDATE_AJAX_TYPE:"POST"}).mixin(r);return u}),function(t,n){var e,i;"string"==typeof t&&(e=t.split("."),i=e.pop(),t=e.reduce(function(t,n){return t&&t[n]},this)),"function"==typeof r&&r.amd?r("nbd/View",["jquery","nbd/Class"],function(){var e=n.apply(this,arguments);return t&&(t[i]=e),e}):(t||this)[i]=n.call(this,jQuery,t.Class)}("jQuery.Core.View",function(t,n){var e=n.extend({$parent:null,$view:null,init:function(){},templateScript:function(){return this.constructor.templateScript()},destroy:function(){this.$view instanceof t&&this.$view.remove(),this.$view=null}},{templateScript:function(n){if(n=n!==void 0?n:!0,this.$TEMPLATE&&this.$TEMPLATE.length||(this.$TEMPLATE=t("#"+this.TEMPLATE_ID)),!this.$TEMPLATE.length){if(n!==!0)return!1;t.error("Missing template: "+this.TEMPLATE_ID)}return this.$TEMPLATE}});return e}),function(t,n){var e,i;"string"==typeof t&&(e=t.split("."),i=e.pop(),t=e.reduce(function(t,n){return t&&t[n]},this)),"function"==typeof r&&r.amd?r("nbd/Controller",["jquery","nbd/Class","nbd/View"],function(){var e=n.apply(this,arguments);return t&&(t[i]=e),e}):(t||this)[i]=n.call(this,jQuery,t.Class,t.View)}("jQuery.Core.Controller",function(t,n,e){var r=n.extend({init:function(){},render:function(){},destroy:function(){}},{inherits:function(t,n){var e,r=!1;if(n||(n=t,t=this),"function"!=typeof t||"function"!=typeof n)return r;for(e=t.prototype;e.constructor.__super__;)if(e=e.constructor.__super__,e===n.prototype){r=!0;break}return r},addTemplate:function(n,e){return t('<script id="'+n+'" type="text/x-jquery-tmpl">'+e+"</script>").appendTo(document.body)},loadTemplate:function(n,i){var o,u,s=t.Deferred();return n.inherits&&n.inherits(e)&&(i="function"==typeof i&&i!==n?i:null,o=n.TEMPLATE_ID,u=n.TEMPLATE_URL),t("#"+o).length?t.Deferred().resolve():o&&u?(t.ajax({url:u,cache:!0}).then(function(n){var e=arguments;return n.html?(t(function(){r.addTemplate(o,n.html),t.isFunction(i)&&i(o),s.resolve.apply(s,e)}),void 0):!1},s.reject,s.notify),s.promise()):(t.error("No template found"),!1)}});return r}),function(t,n){var e,i;"string"==typeof t&&(e=t.split("."),i=e.pop(),t=e.reduce(function(t,n){return t&&t[n]},this)),"function"==typeof r&&r.amd?r("nbd/Events",["jquery"],function(){var e=n.apply(this,arguments);return t&&(t[i]=e),e}):(t||this)[i]=n.call(this,jQuery)}("jQuery.Core.Events",function(t){function n(n,e,r){"string"!=typeof n&&t.error("Invalid event name"),t.isFunction(e)||t.error("Invalid callback"),r&&u[n]&&t.error("Provided options after initial bind"),u[n]||(r=r||"stopOnFalse",u[n]={cb:t.Callbacks(r),funcs:[]}),u[n].cb.add(e),u[n].funcs.push(e)}function e(n,e){var r,i,o;if(!u[n])return u[n]={cb:t.Callbacks(e),funcs:[]},void 0;for(u[n].cb.empty(),u[n].cb=t.Callbacks(e),r=0,i=u[n].funcs.length;i>r;++r)o=u[n].funcs[r],u[n].cb.add(o)}function r(n,r){return u[n]||t.error("Event does not exist"),e(n,r)}function i(n,e){if(u[n]){if(!e)return u[n].cb.empty(),delete u[n],void 0;u[n].cb.remove(e),u[n].funcs=t.grep(u[n].funcs,function(t){return t!==e})}}function o(t){if(u[t]){var n=Array.prototype.slice.call(arguments,1);u[t].cb.fireWith(null,n)}}var u={};return{bind:n,unbind:i,trigger:o,option:e,updateOptions:r}}),r("nbd/util/pipe",[],function(){return function(){var t=arguments;return function(){var n,e;for(n=0;t.length>n;++n)e=t[n].apply(this,0===n?arguments:[e]);return e}}}),r("nbd/util/protochain",[],function(){function t(n,e){var r,i;(i=Object.getPrototypeOf(n))!==Object.prototype&&(t(i,e),e=i.constructor.prototype),r=Object.create(e);for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);r.constructor=n.constructor,n.constructor.prototype=r}return function(n,e,r){if(2>arguments.length)throw new TypeError("Not enough arguments");if("function"!=typeof n)throw new TypeError("First argument must be a constructor");if("function"!=typeof e)throw new TypeError("Second argument must be a constructor");for(var i,o=n.prototype;(i=Object.getPrototypeOf(o))!==Object.prototype;)o=i;try{if(o.__proto__)return o.__proto__=e.prototype,void 0}catch(u){if(r!==!0)throw u}if(r!==!0)throw Error("Cannot modify prototype chain");t(n.prototype,e.prototype)}}),r("nbd/util/jxon",[],function(){function t(t){return f.test(t)?null:p.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):isFinite(Date.parse(t))?new Date(t):t}function n(){}function e(t){return null===t?new n:t instanceof Object?t:new t.constructor(t)}function r(n,i,o,f){var p,l,h,d,y,b,g,v,m,w,_,P,T=a.length,j=n.hasChildNodes(),O=n.hasAttributes(),E=Boolean(2&i),x=0,C="",A=E?{}:!0;if(j)for(b=0;n.childNodes.length>b;b++)y=n.childNodes.item(b),4===y.nodeType?C+=y.nodeValue:3===y.nodeType?C+=y.nodeValue.trim():1!==y.nodeType||y.prefix||a.push(y);for(g=a.length,v=t(C),E||!j&&!O||(A=0===i?e(v):{}),m=T;g>m;m++)p=a[m].nodeName.toLowerCase(),l=r(a[m],i,o,f),A.hasOwnProperty(p)?(A[p].constructor!==Array&&(A[p]=[A[p]]),A[p].push(l)):(A[p]=l,x++);if(O){for(w=n.attributes.length,_=f?"":c,P=f?{}:A,d=0;w>d;x++,d++)h=n.attributes.item(d),P[_+h.name.toLowerCase()]=t(h.value.trim());f&&(o&&Object.freeze(P),A[s]=P,x-=w-1)}return 3===i||(2===i||1===i&&x>0)&&C?A[u]=v:!E&&0===x&&C&&(A=v),o&&(E||x>0)&&Object.freeze(A),a.length=T,A}function i(t,n,e){var r,o,a,f,p;e instanceof String||e instanceof Number||e instanceof Boolean?n.appendChild(t.createTextNode(""+e)):e.constructor===Date&&n.appendChild(t.createTextNode(e.toGMTString()));for(a in e)if(r=e[a],!(isFinite(a)||r instanceof Function))if(a===u)null!==r&&r!==!0&&n.appendChild(t.createTextNode(r.constructor===Date?r.toGMTString():r+""));else if(a===s)for(f in r)n.setAttribute(f,r[f]);else if(a.charAt(0)===c)n.setAttribute(a.slice(1),r);else if(r.constructor===Array)for(p=0;r.length>p;p++)o=t.createElement(a),i(t,o,r[p]),n.appendChild(o);else o=t.createElement(a),r instanceof Object?i(t,o,r):null!==r&&r!==!0&&o.appendChild(t.createTextNode(""+r)),n.appendChild(o)}var o,u="keyValue",s="keyAttributes",c="@",a=[],f=/^\s*$/,p=/^(?:true|false)$/i;return n.prototype.toString=function(){return"null"},n.prototype.valueOf=function(){return null},o={build:function(t,n,e,i){var o=arguments.length>1&&"number"==typeof n?3&n:1;return r(t,o,e||!1,arguments.length>3?i:3===o)},unbuild:function(t){var n=document.implementation.createDocument("","",null);return i(n,n,t),n}}}),e(["nbd/Class","nbd/Model","nbd/View","nbd/Controller","nbd/Events","nbd/trait/pubsub","nbd/util/async","nbd/util/pipe","nbd/util/protochain","nbd/util/jxon"],function(n,e,r,i,o,u,s,c,a,f){var p={Class:n,Model:e,View:r,Controller:i,Events:o,trait:{pubsub:u},util:{async:s,pipe:c,protochain:a,jxon:f}};t.nbd=p}),r("build/all",function(){})})(this);