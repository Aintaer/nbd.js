!function(t){var e,n,i;!function(t){function r(t,e){return m.call(t,e)}function o(t,e){var n,i,r,o,s,u,f,a,c,l,p=e&&e.split("/"),h=w.map,d=h&&h["*"]||{};if(t&&"."===t.charAt(0))if(e){for(p=p.slice(0,p.length-1),t=p.concat(t.split("/")),a=0;a<t.length;a+=1)if(l=t[a],"."===l)t.splice(a,1),a-=1;else if(".."===l){if(1===a&&(".."===t[2]||".."===t[0]))break;a>0&&(t.splice(a-1,2),a-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||d)&&h){for(n=t.split("/"),a=n.length;a>0;a-=1){if(i=n.slice(0,a).join("/"),p)for(c=p.length;c>0;c-=1)if(r=h[p.slice(0,c).join("/")],r&&(r=r[i])){o=r,s=a;break}if(o)break;!u&&d&&d[i]&&(u=d[i],f=a)}!o&&u&&(o=u,s=f),o&&(n.splice(0,s,o),t=n.join("/"))}return t}function s(e,n){return function(){return h.apply(t,_.call(arguments,0).concat([e,n]))}}function u(t){return function(e){return o(e,t)}}function f(t){return function(e){y[t]=e}}function a(e){if(r(v,e)){var n=v[e];delete v[e],g[e]=!0,p.apply(t,n)}if(!r(y,e)&&!r(g,e))throw new Error("No "+e);return y[e]}function c(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function l(t){return function(){return w&&w.config&&w.config[t]||{}}}var p,h,d,b,y={},v={},w={},g={},m=Object.prototype.hasOwnProperty,_=[].slice;d=function(t,e){var n,i=c(t),r=i[0];return t=i[1],r&&(r=o(r,e),n=a(r)),r?t=n&&n.normalize?n.normalize(t,u(e)):o(t,e):(t=o(t,e),i=c(t),r=i[0],t=i[1],r&&(n=a(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},b={require:function(t){return s(t)},exports:function(t){var e=y[t];return"undefined"!=typeof e?e:y[t]={}},module:function(t){return{id:t,uri:"",exports:y[t],config:l(t)}}},p=function(e,n,i,o){var u,c,l,p,h,w,m=[];if(o=o||e,"function"==typeof i){for(n=!n.length&&i.length?["require","exports","module"]:n,h=0;h<n.length;h+=1)if(p=d(n[h],o),c=p.f,"require"===c)m[h]=b.require(e);else if("exports"===c)m[h]=b.exports(e),w=!0;else if("module"===c)u=m[h]=b.module(e);else if(r(y,c)||r(v,c)||r(g,c))m[h]=a(c);else{if(!p.p)throw new Error(e+" missing "+c);p.p.load(p.n,s(o,!0),f(c),{}),m[h]=y[c]}l=i.apply(y[e],m),e&&(u&&u.exports!==t&&u.exports!==y[e]?y[e]=u.exports:l===t&&w||(y[e]=l))}else e&&(y[e]=i)},e=n=h=function(e,n,i,r,o){return"string"==typeof e?b[e]?b[e](n):a(d(e,n).f):(e.splice||(w=e,n.splice?(e=n,n=i,i=null):e=t),n=n||function(){},"function"==typeof i&&(i=r,r=o),r?p(t,e,n,i):setTimeout(function(){p(t,e,n,i)},4),h)},h.config=function(t){return w=t,w.deps&&h(w.deps,w.callback),h},i=function(t,e,n){e.splice||(n=e,e=[]),r(y,t)||r(v,t)||(v[t]=[t,e,n])},i.amd={jQuery:!0}}(),i("node_modules/almond/almond",function(){}),i("nbd/Class",[],function(){function t(t,e){return function(){return t.apply(this,arguments),e.apply(this,arguments)}}var e,n,i,r,o=/xyz/.test(function(){return xyz})?/\b_super\b/:/.*/;return n=function(e,s){function u(t,e,n){var i=function(){return p[t].apply(this,arguments)};return function(){var t=this.hasOwnProperty("_super"),r=this._super;this._super=i;try{return n&&this._super.apply(this,arguments),e.apply(this,arguments)}catch(o){throw o}finally{t&&(this._super=r)}}}function f(){"function"==typeof this.init&&this.init.apply(this,arguments)}var a,c,l,p=this.prototype;a=Object.create(p);for(c in e)e.hasOwnProperty(c)&&(l="init"===c&&!(s&&s.hasOwnProperty("_")&&s._),a[c]="function"==typeof e[c]&&"function"==typeof p[c]&&(l||o.test(e[c]))?u(c,e[c],l):e[c]);for(c in this)this.hasOwnProperty(c)&&(f[c]=this[c]);for(c in s)s.hasOwnProperty(c)&&(l="init"===c&&!(s&&s.hasOwnProperty("_")&&s._),f[c]=l&&"function"==typeof f[c]&&"function"==typeof s[c]?t(f[c],s[c]):s[c]);return f.prototype=a,Object.defineProperty(f.prototype,"constructor",{value:f}),Object.defineProperties(f,{extend:{value:n,enumerable:!1},mixin:{value:i},inherits:{value:r}}),f},i=function(t){var e={};return Object.keys(t).forEach(function(n){e[n]={configurable:!1,value:t[n]}}),Object.defineProperties(this.prototype,e),this},r=function(t){var e,n=!1;if("function"==typeof t)return t.prototype.isPrototypeOf(this.prototype);if("object"==typeof t){n=!0;for(e in t)if(t.hasOwnProperty(e)&&t[e]!==this.prototype[e]){n=!1;break}}return n},e=function(){},e.extend=n,e}),i("nbd/util/async",[],function(){function t(t){i.push(t),postMessage(r,"*")}function e(t){if(t.source===window&&t.data===r&&(t.stopPropagation(),i.length>0)){var e=i.shift();e()}}var n,i=[],r="async-message",o="function"==typeof postMessage&&"function"==typeof addEventListener;return o&&addEventListener("message",e,!0),n=o?t:function(t){setTimeout(t,0)}}),i("nbd/util/extend",[],function(){return function(t){var e,n,i;for(e=1;e<arguments.length;++e){i=arguments[e];for(n in i)t[n]=i[n]}return t}}),i("nbd/util/diff",["nbd/util/extend"],function(t){function e(t,i){var r,o=!0;if(Object.getPrototypeOf(t)!==Object.prototype||Object.getPrototypeOf(i)!==Object.prototype)return!1;for(r in t){if(t[r]!==i[r])return!1;if(t.hasOwnProperty(r)&&"object"==typeof t[r]&&t[r]&&Object.getPrototypeOf(t[r])===Object.prototype){if(~n.indexOf(t[r]))continue;try{n.push(t[r]),o=o&&e(i[r],t[r])}catch(s){}finally{n.pop()}}if(!o)return o}return o}var n=[];return function(n,i,r){var o,s,u,f={};if("object"!=typeof i||"object"!=typeof n||null===i||null===n)throw new TypeError("Arguments must be objects");i=t({},i);for(o in n)if(n.hasOwnProperty(o)){if(s=n[o],u=i[o],delete i[o],s===u)continue;"object"==typeof s&&"object"==typeof u&&s&&u&&e(s,u)||(f[o]=[s,u],r&&r.apply(this,[o,s,u]))}for(o in i)i.hasOwnProperty(o)&&void 0!==i[o]&&(f[o]=[n[o]],r&&r.apply(this,[o,void 0,i[o]]));return f}}),i("nbd/trait/pubsub",[],function(){var t=/\s+/,e=function n(t){return n.i=n.i||0,(t||"")+ ++n.i};return{on:function(e,n,i){var r,o,s;if(!n)return this;for(e=e.split(t),this._callbacks||Object.defineProperty(this,"_callbacks",{configurable:!0,value:{},writable:!0}),r=this._callbacks;o=e.shift();)s=r[o]||(r[o]=[]),s.push(n,i);return this},off:function(e,n,i){var r,o,s,u;if(!(o=this._callbacks))return this;if(!(e||n||i))return delete this._callbacks,this;for(e=e?e.split(t):Object.keys(o);r=e.shift();)if((s=o[r])&&(n||i))for(u=s.length-2;u>=0;u-=2)n&&s[u]!==n||i&&s[u+1]!==i||s.splice(u,2);else delete o[r];return this},trigger:function(e){var n,i,r,o,s,u,f,a;if(!(i=this._callbacks))return this;for(a=[],e=e.split(t),o=1,s=arguments.length;s>o;o++)a[o-1]=arguments[o];for(;n=e.shift();){if((f=i.all)&&(f=f.slice()),(r=i[n])&&(r=r.slice()),r)for(o=0,s=r.length;s>o;o+=2)r[o].apply(r[o+1]||this,a);if(f)for(u=[n].concat(a),o=0,s=f.length;s>o;o+=2)f[o].apply(f[o+1]||this,u)}return this},listenTo:function(t,n,i){var r=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=e("l"));return r[o]=t,t.on(n,i||this,this),this},stopListening:function(t,e,n){var i=this._listeners;if(i){if(t)t.off(e,n,this),e||n||delete i[t._listenerId];else{for(var r in i)i[r].off(null,null,this);this._listeners={}}return this}}}}),i("nbd/Model",["nbd/Class","nbd/util/async","nbd/util/extend","nbd/util/diff","nbd/trait/pubsub"],function(t,e,n,i,r){var o=function(t,e){this._dirty&&(i.call(this,e||this._data,t,this.trigger),this._dirty=0)},s=t.extend({init:function(t,e){"string"==typeof t&&t.match(/^\d+$/)&&(t=+t),void 0===e&&(e=t),this.id=function(){return t};try{Object.defineProperty(this,"_dirty",{value:0,writable:!0}),Object.defineProperty(this,"_data",{enumerable:!1,configurable:!0,value:e||{},writable:!0})}catch(n){this._dirty=0,this._data=e}},destroy:function(){this.off()},data:function(){return this._dirty++||e(o.bind(this,n({},this._data))),this._data},get:function(t){return this._data[t]},set:function(t,e){var n,i=this.data();if("string"==typeof t)return i[t]=e,this;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return this}},toJSON:function(){return this._data}}).mixin(r);return s}),i("nbd/View",["nbd/Class","nbd/trait/pubsub"],function(t,e){var n=t.extend({$view:null,render:function(t){var e=this.$view;return this.trigger("prerender"),this.$view=this.template(t||this.templateData()),e&&e.length&&e.replaceWith(this.$view),this.trigger("postrender",this.$view),this.rendered&&this.rendered(this.$view),this.$view},template:function(){},templateData:function(){return{}},destroy:function(){this.$view&&this.$view.remove&&this.$view.remove(),this.$view=null,this.off()}}).mixin(e);return n}),i("nbd/View/Entity",["nbd/View"],function(t){var e=t.extend({init:function(t){"object"==typeof t&&(this._model=this.Model=t),this.id=t&&t.id||function(){return t}},destroy:function(t){this._model.off(null,null,this),t||(this._model=this.Model=null),this._super()},templateData:function(){return this._model&&this._model.data?this._model.data():this.id()},render:function(t){var e=this.$view,n=!(e&&t);return n&&(this.trigger("prerender"),this.$view=this.template(this.templateData())),t?this.$view&&this.$view.appendTo(t):e&&e.replaceWith(this.$view),n&&(this.trigger("postrender",this.$view),"function"==typeof this.rendered&&this.rendered(this.$view)),this.$view}});return e}),i("nbd/View/Element",["nbd/View"],function(t){var e=t.extend({$parent:null,init:function(t){this.$parent=t},render:function(t){var e=this.$view;return this.trigger("prerender"),this.$view=this.template(t||this.templateData()),e&&e.length?e.replaceWith(this.$view):this.$view.appendTo(this.$parent),this.trigger("postrender",this.$view),this.rendered&&this.rendered(this.$view),this.$view}});return e}),i("nbd/util/construct",[],function(){var t=Object.prototype.toString;return function(){if(!(t.call(this).indexOf("Function")+1))throw new TypeError("construct called on incompatible Object");var e=Object.create(this.prototype),n=this.apply(e,arguments);return Object(n)===n?n:e}}),i("nbd/Controller",["nbd/Class","nbd/View","nbd/util/construct"],function(t,e,n){var i=t.extend({View:null,destroy:function(){},_initView:function(t){var e=Array.prototype.slice.call(arguments,1);(this._view=this.View=n.apply(t,e)).Controller=this},switchView:function(){var t=this._view;this._initView.apply(this,arguments),t&&(t.$view&&(this._view.$view=t.$view,this._view.render()),t.destroy())}});return i}),i("nbd/Controller/Entity",["nbd/util/construct","nbd/Controller","nbd/View/Entity","nbd/Model"],function(t,e,n,i){var r=e.extend({Model:null,init:function(){this.Model=t.apply(this.constructor.MODEL_CLASS,arguments),this._initView(this.constructor.VIEW_CLASS,this.Model)},render:function(t,e){e=e||this.constructor.VIEW_CLASS,this.requestView(e),this.View.render(t)},destroy:function(){this.View.destroy(),this.Model.destroy(),this.Model=this.View=null},requestView:function(t){this.View instanceof t||this.switchView(t,this.Model)}},{VIEW_CLASS:n,MODEL_CLASS:i});return r}),i("nbd/event",["nbd/util/extend","nbd/trait/pubsub"],function(t,e){var n=t({},e);return n.bind=n.on,n.unbind=n.off,n.fire=n.trigger,n}),i("nbd/util/deparam",[],function(){return function(t,e){var n={},i={"true":!0,"false":!1,"null":null};return t.replace(/\+/g," ").split("&").forEach(function(t){var r,o=t.split("="),s=decodeURIComponent(o[0]),u=n,f=0,a=s.split("]["),c=a.length-1;if(/\[/.test(a[0])&&/\]$/.test(a[c])?(a[c]=a[c].replace(/\]$/,""),a=a.shift().split("[").concat(a),c=a.length-1):c=0,2===o.length)if(r=decodeURIComponent(o[1]),e&&(r=r&&!isNaN(r)?+r:"undefined"===r?void 0:void 0!==i[r]?i[r]:r),c)for(f;c>=f;f++)s=""===a[f]?u.length:a[f],u=u[s]=c>f?u[s]||(a[f+1]&&isNaN(a[f+1])?{}:[]):r;else Array.isArray(n[s])?n[s].push(r):n[s]=void 0!==n[s]?[n[s],r]:r;else s&&(n[s]=e?void 0:"")}),n}}),i("nbd/util/media",["nbd/util/extend","nbd/trait/pubsub"],function(t,e){function n(t,e){var n=u(e);s[t]=n,n.addListener(o.bind(n,t)),n.matches&&o.call(n,t)}function i(t){return s[t]&&s[t].matches}function r(t,e){var i;if(!u)throw new Error("Media queries not supported.");if("string"==typeof t)return n(t,e),r;if("object"==typeof t)for(i in t)t.hasOwnProperty(i)&&(e=t[i],n(i,e));return r}var o,s={},u="undefined"!=typeof matchMedia?matchMedia:"undefined"!=typeof msMatchMedia?msMatchMedia:null;return t(r,e),o=function(t){r.trigger(t+(this.matches?":enter":":exit")),r.trigger(t,this.matches)},r.is=i,r.getState=function(t){return t?i(t):Object.keys(s).filter(i)},r}),i("nbd/util/pipe",[],function(){return function(){var t=arguments;return function(){var e,n;for(e=0;e<t.length;++e)n=t[e].apply(this,0===e?arguments:[n]);return n}}}),i("nbd/util/protochain",[],function(){function t(e,n){var i,r;(r=Object.getPrototypeOf(e))!==Object.prototype&&(t(r,n),n=r.constructor.prototype),i=Object.create(n);for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.constructor=e.constructor,e.constructor.prototype=i}return function(e,n,i){if(arguments.length<2)throw new TypeError("Not enough arguments");if("function"!=typeof e)throw new TypeError("First argument must be a constructor");if("function"!=typeof n)throw new TypeError("Second argument must be a constructor");for(var r,o=e.prototype;(r=Object.getPrototypeOf(o))!==Object.prototype;)o=r;if(i!==!0){if(o.__proto__)return o.__proto__=n.prototype,void 0;throw new Error("Cannot modify prototype chain")}t(e.prototype,n.prototype)}}),i("build/all",["nbd/Class","nbd/Model","nbd/View","nbd/View/Entity","nbd/View/Element","nbd/Controller","nbd/Controller/Entity","nbd/event","nbd/trait/pubsub","nbd/util/async","nbd/util/construct","nbd/util/deparam","nbd/util/diff","nbd/util/extend","nbd/util/media","nbd/util/pipe","nbd/util/protochain"],function(t,e,n,i,r,o,s,u,f,a,c,l,p,h,d,b,y){var v={Class:t,Model:e,View:n,Controller:o,event:u,trait:{pubsub:f},util:{async:a,construct:c,deparam:l,diff:p,extend:h,media:d,pipe:b,protochain:y}};return v.View.Element=r,v.View.Entity=i,v.Controller.Entity=s,v}),t.nbd=n("build/all")}(this);